prs:
  # === Hard score: Original PRs that introduced bugs (Type A) ===

  - id: pr-47154
    url: "https://github.com/milvus-io/milvus/pull/47154"
    category: hard
    title: "Fast finish compaction when L0Comp hit zero L1/L2"
    difficulty: L2
    language: go
    known_bugs:
      - id: save-segment-meta
        description: |
          While optimizing the early-exit logic for compaction, the signature and semantics
          of saveSegmentMeta were changed. It now returns an empty plan instead of an error
          when there are no L1/L2 segments, but downstream processing paths were not updated
          to handle this change, causing segment metadata processing errors.

  - id: pr-24358
    url: "https://github.com/milvus-io/milvus/pull/24358"
    category: hard
    title: "Retrieve segments concurrently"
    difficulty: L2
    language: go
    known_bugs:
      - id: concurrent-segment-bug
        description: |
          A race condition was introduced when segment retrieval was changed to run
          concurrently. Multiple goroutines access shared state simultaneously without
          proper synchronization, leading to data inconsistency.

  - id: pr-44324
    url: "https://github.com/milvus-io/milvus/pull/44324"
    category: hard
    title: "Encode cluster id in auto id"
    difficulty: L2
    language: go
    known_bugs:
      - id: id-format-compat
        description: |
          The auto-increment ID generation format was modified to encode the cluster ID,
          but backward compatibility with the old ID format was not handled, causing ID
          lookups on existing data to fail.

  - id: pr-43937
    url: "https://github.com/milvus-io/milvus/pull/43937"
    category: hard
    title: "Use folly::SharedMutex preventing starvation"
    difficulty: L2
    language: cpp
    known_bugs:
      - id: folly-mutex-semantic
        description: |
          std::shared_mutex was bulk-replaced with folly::SharedMutex, but the folly
          version has different lock semantics compared to the standard library (e.g.,
          upgrade/downgrade behavior), causing concurrency issues.

  - id: pr-43542
    url: "https://github.com/milvus-io/milvus/pull/43542"
    category: hard
    title: "DataCodec release ownership of input_data"
    difficulty: L1
    language: cpp
    known_bugs:
      - id: lifetime-issue
        description: |
          Three lines of code that released ownership of input_data were removed, causing
          incorrect object lifetime management. input_data is freed prematurely, and
          subsequent access results in a use-after-free.

  - id: pr-35720
    url: "https://github.com/milvus-io/milvus/pull/35720"
    category: hard
    title: "Avoid coexistence of old coordinator and new node"
    difficulty: L2
    language: go
    known_bugs:
      - id: blocking-logic
        description: |
          Blocking logic was added during rolling upgrades to prevent coexistence of old
          and new nodes, but the blocking condition was incorrectly designed, causing
          permanent node startup blocking under certain upgrade sequences.

  - id: pr-46440
    url: "https://github.com/milvus-io/milvus/pull/46440"
    category: hard
    title: "Unify RO node handling to avoid balance channel task stuck"
    difficulty: L3
    language: go
    known_bugs:
      - id: check-stale-wrong-node
        description: |
          When unifying the checkStale method, action.Node() was used to check status for
          all action types. However, LeaderAction's Node() returns the worker node rather
          than the leader node (delegator), causing tasks that sync segments from RO workers
          to RW delegators to be incorrectly marked as stale.

  - id: pr-38300
    url: "https://github.com/milvus-io/milvus/pull/38300"
    category: hard
    title: "Query coord stop progress is too slow"
    difficulty: L3
    language: go
    known_bugs:
      - id: qc-stop-regression
        description: |
          QueryCoord shutdown speed was optimized for scenarios with 10k+ collections.
          The changes were spread across 24 files, and some necessary cleanup logic was
          removed, causing resources to not be properly released after shutdown.

  # === Soft score: Normal quality PRs (no known bugs) ===

  - id: pr-47387
    url: "https://github.com/milvus-io/milvus/pull/47387"
    category: soft
    title: "Update default auto index for vector fields"
    difficulty: null
    language: go
    known_bugs: []

  - id: pr-47032
    url: "https://github.com/milvus-io/milvus/pull/47032"
    category: soft
    title: "Support truncate collection REST API v2"
    difficulty: null
    language: go
    known_bugs: []
